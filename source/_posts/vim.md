---
title: vim 常用命令
date: 2017/6/15 16:24:33
tags: 
	- vim
	- Command
categories: 
	- 编程
---

### 概述

记录一些 `vim` 的常用命令，方便平时使用时的查阅

<!-- more -->

### 启动 vim

- `vim 文件` 打开或者新建文件，并将光标置于第一行首
- `vim +n 文件` 打开文件，并将光标置于第 N 行首
- `vim + 文件` 打开文件，并将光标置于最后一行行首
- `vim +/搜索条件` 文件 打开文件，并将光标置于第一个与搜索条件匹配的行行首
- `vim -f 文件` 上次使用 vim 编辑是发生系统崩溃，恢复该文件（待测试）
- `vim 文件1 文件2 ...` 打开多个文件，依次进行编辑


### 多窗口操作

- `:open 文件` 在 vim 窗口打开一个新文件
- `:split 文件` 在新窗口打开文件
- `:bn 文件` 切换到下一个文件
- `:bp 文件` 切换到上一个文件
- `:args` 查看当前打开的文件列表，当前正在编辑的文件会用[]括起来
- `:e ftp://192.168.10.76/abc.txt` 或者 `:e \qadrive\test\1.txt` 打开远程文件

### vim 的模式

- 正常模式（按 `Esc` 或者 `Control + [` 进入） 左下角显示文件名或者为空
- 插入模式（按 `i` 键进入） 左下角显示 --INSERT--
- 可视模式 左下角显示 --VISUAL--
> `v` 激活面向字符的可视模式
> `V` 激活面向行的可视模式
> `Control + V` 激活面向块的可视模式
> `gv` 重选上次的高亮区域

### 移动命令

- `h` 左移一个字符
- `l` 右移一个字符，这个命令很少用，一般用 `w` 代替
- `k` 上移一个字符
- `j` 下移一个字符
- 以上4个命令可以配合数字使用，如 `j20` 就是下移20行
- `^` 移动光标到本行第一个非空字符上
- `0` 移动光标到行首
- `$` 移动光标到行尾
- `Control + b` 类似于键盘上的 `PageUp`
- `Control + f` 类似于键盘上的 `PageDown`
- `G` 移动到末行
- `gg` 移动到首行
- `1G` 移动到首行
- `39G`, `:39` 移动到39行
- `H` 移动到当前窗口的首行
- `M` 移动到当前窗口的中间位置
- `L` 移动到当前窗口的最后一行
- `w` 光标移动到下一个单词的词首 （注：对于中文，连续的多个汉字作为一个word）
- `2w` 重复执行 `w` 操作两次
- `e` 光标移动到下一个词尾
- `5e` 重复执行 `e` 操作5次
- `b` 向前移动光标，移动到前一个单词的词首
- `4b` 重复执行 `b` 操作4次
- `ge` 光标移动到前一个单词的词尾
- `4ge` 重复执行 `ge` 操作4次
- `(` 光标移动到上一句
- `)` 光标移动到下一句
- `{` 光标移动到上一个段落
- `}` 光标移动到下一个段落
- `f` 查找命令也可以用于移动，`3fx` 移动到光标后第三个 `x` 的字符
- `F` 反向查找，同 `f`
- `Control + e` 向下滚一行
- `Control + y` 向上滚一行
- `Control + d` 向下滚半屏
- `Control + u` 向上滚半屏
- `Control + f` 向下滚一屏
- `Control + b` 向上滚一屏

### vim 快速选中，复制粘贴替换一个单词

1. 光标处于 `word` 词首时，按 `ve` 可选中当前单词
2. 按 `y` ，复制
3. 将光标移动到另一单词 `word2` 词首，按 `ve` 选中当前单词
4. 按 `p` ，粘贴

- 快速复制一个单词 `yaw`

### 插入命令

- `i` 在当前位置前插入
- `I` 在当前行首插入
- `a` 在当前位置后插入
- `A` 在当前行尾插入
- `o` 在当前行之后插入一行
- `O` 在当前行以前插入一行

### 查找命令

- `/text` 查找 text ，按 `n` 键查找下一个， 按 `N` 键查找上一个
- `?text` 反向查找 text ，按 `n` 键查找下一个，按 `N` 键查找上一个
- vim 中有一些特殊字符在查找时需要转义 `.*[]^%/?~$`
- `:set ignorecase` 忽略大小写查找
- `:set noignorecase` 不忽略大小写查找
- 将光标移动到某个词上，按 `*` 或者 `#` 键即可对该单词进行搜索，`*` 相当于 `/搜索` ，`#` 相当于 `?搜索`
- `:set hlsearch` 高亮搜索结果，所有结果都高亮显示
- `:set nohlsearch` 关闭高亮搜索结果
-  `:nohlsearch` 关闭当前高亮搜索结果，如果再次搜索或者按下 `n` 或 `N` 键则会再次高亮
- `:set incsearch` 逐步搜索模式，对当前键入的字符进行搜索而不必等待键入完成
- `:set wrapspan` 重新搜索，在搜索到文件头或尾时，返回继续搜索，默认开启

### 替换命令

- `ra` 将当前字符替换成 a，当前字符即光标所在字符
- `:s/old/new` 用 `new` 替换 `old` ,替换当前行的第一个匹配
- `:s/old/new/g` 用 `new` 替换 `old` ,替换当前行的所有匹配
- `:%s/old/new` 用 `new` 替换 `old` ,替换所有行的第一个匹配
- `:%s/old/new/g` 用 `new` 替换 `old` ,替换所有行的所有匹配
- `:10,20 s/^/    /g` 在第10行到第20行之间每行前面加4个空格，用于缩进
- `ddp` 交换当前光标所在行和其下紧邻的一行
- `xp` 交换当前光标所在字符和之后一个字符

### 撤销和重做

- `u` 撤销 `Undo`
- `U` 撤销整行的操作
- `Control + r` 重做 `Redo` ，即撤销的撤销

### 删除命令（剪切命令）

- `x`, `dl` 删除当前字符
- `3x` 删除当前光标开始向后三个字符
- `X`, `dh` 删除当前字符前一个字符
- `dd` 删除当前行
- `dj` 删除上一行
- `dk` 删除下一行
- `10d` 删除当前行开始的十行
- `D`, `d$` 删除当前字符到行尾
- `kdgg` 删除当前行之前的所有行
- `kdG` 删除当前之后的所有行
- `:1,39d` 删除1-39行
- `:39,$d` 删除39行以及之后所有行
- `:1,$d` 删除所有行
- `:1,39 m 50` 剪切1-39行，然后粘贴到50行之后
- `J` 删除两行之间的所有空行，实际是合并两行

### 拷贝与粘贴

- `yy` 拷贝当前行
- `nyy` 拷贝当前行之后的 `n` 行，比如 `2yy` 是拷贝当前行以及下一行
- `p` 在当前光标后粘贴，如果之前使用了 `yy` 命令来复制一行，那么就在当前行的下一行粘贴
- `P` 在当前行的上一行粘贴 
- `:1,39 co 50` 复制一份1-39行的内容，粘贴到50行之后
- `:1,$ co $` 复制全文，然后粘贴在最后一行之后

### 退出

- `:wq`, `ZZ` 保存并退出
- `:q!` 强制退出并放弃所有修改
- `:e!` 放弃所有修改，并打开原来的文件

### 窗口命令

- `:split`, `:new` 打开一个新窗口，光标停在顶层的窗口上
- `:split filename`, `:new filename` 用新窗口打开文件
- `:split` 打开的窗口是横的， `:vsplit` 打开的窗口是竖的
- `Control + ww` 切换到下一个窗口
- `Control + wj` 移动到下方的窗口
- `Control + wk` 移动到上方的窗口

### 关闭窗口

- `:close` 关闭窗口，最后一个窗口不能使用这个命令，防止意外退出 `vim`
- `:only` 关闭所有窗口，只保留当前窗口


